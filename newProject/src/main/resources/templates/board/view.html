<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸°</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>
<body>

<div class="container mt-5">
    <h2>ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸°</h2>
    <table class="table" border="1">
        <input type="hidden" id="boardId" th:value="${boardId}">
        <input type="hidden" id="boardNo" th:value="${boardDto.boardNo}">
        <input type="hidden" id="memNo" th:value="${boardDto.memNo}">
        <input type="hidden" id="writerNm" th:value="${boardDto.writerNm}">
        <input type="hidden" id="alreadyFollowFl" th:value="${alreadyFollowFl}">
        <input type="hidden" id="sessionMemNo" th:value="${session.member.memNo}">
        <tr>
            <th>ì‘ì„±ì</th>
            <td th:text="${boardDto.writerNm}"></td>
        </tr>
        <tr>
            <th>ì œëª©</th>
            <td th:text="${boardDto.subject}"></td>
        </tr>
        <tr>
            <th>ë‚´ìš©</th>
            <td th:text="${boardDto.contents}"></td>
        </tr>
        <tr>
            <th>ì¢‹ì•„ìš”</th>
            <td th:text="${boardDto.likeCnt}"></td>
        </tr>
        <tr>
            <th>ì‹ë¹„</th>
            <td th:text="${boardDto.foodCharge}"></td>
        </tr>
        <tr>
            <th>êµí†µë¹„</th>
            <td th:text="${boardDto.transportCharge}"></td>
        </tr>
        <tr>
            <th>ê¸°íƒ€ ê²½ë¹„</th>
            <td th:text="${boardDto.etcCharge}"></td>
        </tr>
        <tr>
            <th>ì—¬í–‰ ì˜ˆì‚°</th>
            <td th:text="${boardDto.budget}"></td>
        </tr>
        <tr>
            <th>ì—¬í–‰ì§€</th>
            <td th:text="${boardDto.district}"></td>
        </tr>
        <tr>
            <th>ë°©ë¬¸ì¼</th>
            <td th:text="${boardDto.visitDt}"></td>
        </tr>
        <tr>
            <th>ì¡°íšŒìˆ˜</th>
            <td th:text="${boardDto.hitCnt}"></td>
        </tr>

    </table>
    <a th:href="${previousPage}" class="btn btn-secondary">ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a><br>
    <a th:if="${session.member.memNo == boardDto.memNo}" href="'/board/' + ${boardId} + '/write/' + ${boardDto.boardNo}" class="btn btn-secondary">ìˆ˜ì •í•˜ê¸°</a><br>
    <button id="doDelete">ì‚­ì œí•˜ê¸°</button><br>
    <button id="like">ì¢‹ì•„ìš”</button><br>
    <button th:id="${alreadyFollowFl ? 'cancelFollow' : 'follow'}">
        <span th:if="${alreadyFollowFl}" th:text="'íŒ”ë¡œìš° ì¤‘'" onclick="cancelFollow()"></span>
        <span th:unless="${alreadyFollowFl}" th:text="'íŒ”ë¡œìš°í•˜ê¸°'" onclick="follow()"></span>
    </button>
<!--    <button th:id="${alreadyRequestFl ? 'deleteFriend' : 'createRequest'}">-->
        <span th:if="${alreadyRequestFl == 'ACCEPT'}" th:text="'âœ…ì¹œêµ¬'" th:id="'alreadyFriend'"></span>
        <span th:if="${alreadyRequestFl == 'REJECT'}" th:text="'âŒì¹œêµ¬ê±°ì ˆë¨'" th:id="'rejectFriend'"></span>
        <span th:if="${alreadyRequestFl == 'REQUEST'}" th:text="'ğŸš€ì¹œêµ¬ìš”ì²­ì·¨ì†Œ'" th:id="'alreadyRequest'"></span>
        <button th:unless="${alreadyRequestFl}" th:id="'createRequest'" th:text="'ì¹œêµ¬ì‹ ì²­'" onclick="createRequest()"></button>
<!--    </button>-->

</div>
<hr>
<div id="count"></div> <!-- ëŒ“ê¸€ ê°¯ìˆ˜ í‘œì‹œ ì˜ì—­ -->
<div id="replys"></div> <!-- ëŒ“ê¸€ í‘œì‹œ ì˜ì—­ -->
<h3>ëŒ“ê¸€ ì‘ì„±</h3>
<textarea id="replyContents" placeholder="ëŒ“ê¸€ì„ ì‘ì„±í•˜ì„¸ìš”"></textarea><br>
<button onclick="doWrite()">ëŒ“ê¸€ ì¶”ê°€</button>

<script>
    const boardNo = document.getElementById("boardNo").value; // ê²Œì‹œê¸€ ë²ˆí˜¸
    const boardId = document.getElementById("boardId").value; // ê²Œì‹œíŒ ì¢…ë¥˜
    const sessionMemNo = document.getElementById('sessionMemNo').value; // ë¡œê·¸ì¸ íšŒì›
    // ëŒ“ê¸€ ì¡°íšŒ í•¨ìˆ˜
    function getReply() {
        fetch(`/reply/${boardId}/getReply/${boardNo}`)
            .then(response => response.json())
            .then(replys => {
                const replyDiv = document.getElementById('replys');
                const replyCnt = document.getElementById('count');
                replyDiv.innerHTML = ''; // ê¸°ì¡´ ëŒ“ê¸€ ì´ˆê¸°í™”
                replyCnt.innerHTML = ''; // ê¸°ì¡´ ê°¯ìˆ˜ ì´ˆê¸°í™”
                const replysCnt = replys.length;
                const count = document.createElement('count');
                count.innerHTML = `<h3 id="count">ëŒ“ê¸€ ${replysCnt}ê°œ</h3>`;
                replyCnt.appendChild(count);
                replys.forEach(reply => {
                    const replyElement = document.createElement('div');
                    replyElement.style.marginBottom = '20px';
                    replyElement.style.marginLeft = (reply.depth * 50) + 'px';
                    replyElement.innerHTML = `
                            <p id="reply-${reply.replyNo}">${reply.contents}</p>
                            `;
                    if (reply.memNo == sessionMemNo) {
                        replyElement.innerHTML += `
                            <button id="deleteReplyBtn-${reply.replyNo}" name="deleteReplyBtn" style="display:inline-block" onclick="deleteReply(${reply.replyNo})">ì‚­ì œ</button>
                            <button id="updateReplyBtn-${reply.replyNo}" name="updateReplyBtn" style="display:inline-block" onclick="updateReply(${reply.replyNo})">ìˆ˜ì •</button>
                        `;
                    }
                    if (reply.depth == 0) {
                        replyElement.innerHTML += `
                            <button id="writeNestedReply-${reply.replyNo}" name="writeNestedReply" style="display:inline-block" onclick="writeNestedReply(${reply.replyNo})">ë‹µê¸€</button>
                            `;
                    }
                    replyElement.innerHTML += `
                            <button id="saveReplyBtn-${reply.replyNo}" name="saveReplyBtn" style="display:none;" onclick="saveReply(${reply.replyNo})">ì €ì¥</button>
                            <button id="cancelReplyBtn-${reply.replyNo}" name="cancelReplyBtn" style="display:none;" onclick="cancelReply(${reply.replyNo})">ì·¨ì†Œ</button>
                            <textarea id="reply-textarea-${reply.replyNo}" style="display:none;">${reply.contents}</textarea>

                            <!-- ë‹µê¸€ ìš”ì†Œ -->
                            <textarea id="nestedReplyTextArea-${reply.replyNo}" style="display:none;"></textarea>
                            <button id="saveNestedReply-${reply.replyNo}" name="saveNestedReplyBtn" style="display:none;" onclick="saveNestedReply(${reply.replyNo})">ë‹µê¸€ì €ì¥</button>
                            <button id="cancelNestedReply-${reply.replyNo}" name="cancelNestedReply" style="display:none;" onclick="cancelNestedReply(${reply.replyNo})">ì·¨ì†Œ</button>
                        `;
                    replyDiv.appendChild(replyElement);
                });
            })
            .catch(error => console.error('Error loading replys:', error));
    }


    // ëŒ€ëŒ“ê¸€ ì €ì¥ í•¨ìˆ˜ S
    function saveNestedReply(replyNo) {
        const contents = document.getElementById('nestedReplyTextArea-' + replyNo).value;
        if (!contents) {
            alert("ë‹µê¸€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”.");
            return;
        }

        const data = {
            contents: contents,
            parentNo: replyNo
        };

        fetch(`/reply/${boardId}/doWrite/${boardNo}`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data),
        })
            .then(() => {
                getReply();  // ëŒ€ëŒ“ê¸€ ëª©ë¡ ìƒˆë¡œê³ ì¹¨
                document.getElementById('nestedReplyTextArea').value = '';  // í…ìŠ¤íŠ¸ë°•ìŠ¤ ë¹„ìš°ê¸°
            })
            .catch(error => console.error('Error adding reply:', error));
    }

    // ëŒ“ê¸€ ì¶”ê°€ í•¨ìˆ˜
    function doWrite() {
        const contents = document.getElementById('replyContents').value;
        if (!contents) {
            alert("ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš”.");
            return;
        }

        const data = {
            contents: contents
        };

        console.log('contents: ' + data.contents);

        fetch(`/reply/${boardId}/doWrite/${boardNo}`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data),
        })
            .then(() => {
                getReply();  // ëŒ“ê¸€ ëª©ë¡ ìƒˆë¡œê³ ì¹¨
                document.getElementById('replyContents').value = '';  // í…ìŠ¤íŠ¸ë°•ìŠ¤ ë¹„ìš°ê¸°
            })
            .catch(error => console.error('Error adding reply:', error));
    }

    // ëŒ“ê¸€ ì‚­ì œ í•¨ìˆ˜
    function deleteReply(replyNo) {
        fetch(`/reply/${boardId}/doDelete/${replyNo}`, {
            method: 'DELETE',
        })
            .then(() => {
                getReply();  // ëŒ“ê¸€ ëª©ë¡ ìƒˆë¡œê³ ì¹¨
            })
            .catch(error => console.error('Error deleting reply:', error));
    }

    // ë‹µê¸€ ë²„íŠ¼ í´ë¦­ ì‹œ
    function writeNestedReply(replyNo) {
        // const replyText = document.getElementById('reply-' + replyNo);
        const nestedReplyTextArea = document.getElementById('nestedReplyTextArea-' + replyNo);
        const saveNestedReply = document.getElementById('saveNestedReply-' + replyNo);
        const cancelNestedReply = document.getElementById('cancelNestedReply-' + replyNo);
        const writeNestedReply = document.getElementById('writeNestedReply-' + replyNo);

        // textareaë¥¼ ë³´ì—¬ì¤Œ
        nestedReplyTextArea.style.display = 'block';
        // ë‹µê¸€ ë²„íŠ¼ì€ ìˆ¨ê¸°ê³  ë‹µê¸€ì €ì¥, ì·¨ì†Œ ë²„íŠ¼ì„ ë³´ì—¬ì¤Œ
        writeNestedReply.style.display = 'none';
        saveNestedReply.style.display = 'block';
        cancelNestedReply.style.display = 'block';
    }

    // ëŒ“ê¸€ ìˆ˜ì • í•¨ìˆ˜
    function updateReply(replyNo) {
        const replyText = document.getElementById('reply-' + replyNo);
        const replyTextArea = document.getElementById('reply-textarea-' + replyNo);
        const updateReplyBtn = document.getElementById('updateReplyBtn-' + replyNo);
        const deleteReplyBtn = document.getElementById('deleteReplyBtn-' + replyNo);
        const saveReplyBtn = document.getElementById('saveReplyBtn-' + replyNo);
        const cancelReplyBtn = document.getElementById('cancelReplyBtn-' + replyNo);

        // ìˆ˜ì • ë²„íŠ¼ í´ë¦­ ì‹œ
        // ëŒ“ê¸€ í…ìŠ¤íŠ¸ë¥¼ ìˆ¨ê¸°ê³ , textareaë¥¼ ë³´ì—¬ì¤Œ
        replyText.style.display = 'none';
        replyTextArea.style.display = 'block';
        // ì‚­ì œ, ìˆ˜ì • ë²„íŠ¼ì„ ìˆ¨ê¸°ê³  ì €ì¥, ì·¨ì†Œ ë²„íŠ¼ì„ ë³´ì—¬ì¤Œ
        updateReplyBtn.style.display = 'none';
        deleteReplyBtn.style.display = 'none';
        saveReplyBtn.style.display = 'inline-block';
        cancelReplyBtn.style.display = 'inline-block';
    }

    // ëŒ“ê¸€ ì·¨ì†Œ ë²„íŠ¼ í´ë¦­ ì‹œ
    function cancelReply(replyNo) {
        const replyText = document.getElementById('reply-' + replyNo);
        const replyTextArea = document.getElementById('reply-textarea-' + replyNo);
        const updateReplyBtn = document.getElementById('updateReplyBtn-' + replyNo);
        const deleteReplyBtn = document.getElementById('deleteReplyBtn-' + replyNo);
        const saveReplyBtn = document.getElementById('saveReplyBtn-' + replyNo);
        const cancelReplyBtn = document.getElementById('cancelReplyBtn-' + replyNo);

        // ì·¨ì†Œ ë²„íŠ¼ í´ë¦­ ì‹œ
        // textareaë¥¼ ìˆ¨ê¸°ê³  ëŒ“ê¸€ í…ìŠ¤íŠ¸ë¥¼ ë³´ì—¬ì¤Œ
        replyTextArea.style.display = 'none';
        replyText.style.display = 'block';
        // ì €ì¥, ì·¨ì†Œ ë²„íŠ¼ì„ ìˆ¨ê¸°ê³  ì‚­ì œ, ìˆ˜ì • ë²„íŠ¼ì„ ë³´ì—¬ì¤Œ
        updateReplyBtn.style.display = 'inline-block';
        deleteReplyBtn.style.display = 'inline-block';
        saveReplyBtn.style.display = 'none';
        cancelReplyBtn.style.display = 'none';
    }

    // ë‹µê¸€ ì·¨ì†Œ ë²„íŠ¼ í´ë¦­ ì‹œ
    function cancelNestedReply(replyNo) {
        const nestedReplyTextArea = document.getElementById('nestedReplyTextArea-' + replyNo);
        const saveNestedReply = document.getElementById('saveNestedReply-' + replyNo);
        const cancelNestedReply = document.getElementById('cancelNestedReply-' + replyNo);
        const writeNestedReply = document.getElementById('writeNestedReply-' + replyNo);

        // textareaë¥¼ ë³´ì—¬ì¤Œ
        nestedReplyTextArea.style.display = 'none';
        // ë‹µê¸€ ë²„íŠ¼ì€ ìˆ¨ê¸°ê³  ë‹µê¸€ì €ì¥, ì·¨ì†Œ ë²„íŠ¼ì„ ë³´ì—¬ì¤Œ
        writeNestedReply.style.display = 'inline-block';
        saveNestedReply.style.display = 'none';
        cancelNestedReply.style.display = 'none';
    }

    // ì¢‹ì•„ìš” ë²„íŠ¼ í•¨ìˆ˜ S
    document.getElementById('like').addEventListener('click', function() {
        const boardNo = document.getElementById('boardNo').value;
        const boardId = document.getElementById('boardId').value;
        const data = {
            boardNo: boardNo,
            boardId: boardId
        };

        fetch('../doLike', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json' // ìš”ì²­ í—¤ë”ì— JSON íƒ€ì… ì§€ì •
            },
            body: JSON.stringify(data) // ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ë¥¼ JSON ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ì—¬ ì „ì†¡
        })
            .then(response => response.text())
            .then(data => {
                if (data === "success") {
                    alert('ì¢‹ì•„ìš”!');
                } else {
                    alert('ì¢‹ì•„ìš” ì‹¤íŒ¨!');
                }
            })
            .catch(error => console.error("Error:", error));
    });
    // ì¢‹ì•„ìš” ë²„íŠ¼ í•¨ìˆ˜ E

    // ëŒ“ê¸€ ì €ì¥ í•¨ìˆ˜ S
    function saveReply(replyNo) {

        const contents = document.getElementById('reply-textarea-' + replyNo).value;

        fetch(`/reply/${boardId}/doUpdate/${replyNo}`, {
            method: 'PATCH',
            body: contents
        })
            .then(() => {
                getReply();  // ëŒ“ê¸€ ëª©ë¡ ìƒˆë¡œê³ ì¹¨
            })
            .catch(error => console.error('Error deleting reply:', error));
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ëŒ“ê¸€ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
    window.onload = getReply;
</script>

<script>
    // ê²Œì‹œê¸€ ì‚­ì œ S
    document.getElementById('doDelete').addEventListener('click', function() {
        const boardId = document.getElementById('boardId').value;
        const boardNo = document.getElementById('boardNo').value;
        const data = {
            boardId: boardId,
            boardNo: boardNo
        };
        fetch('../doDelete', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json' // ìš”ì²­ í—¤ë”ì— JSON íƒ€ì… ì§€ì •
            },
            body: JSON.stringify(data) // ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ë¥¼ JSON ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ì—¬ ì „ì†¡
        })
            .then(response => response.text())
            .then(data => {
                if (data === "success") {
                    console.log('ê²Œì‹œê¸€ ì‚­ì œ ì„±ê³µ');
                    window.location.href="/board/" + boardId + "/list";
                } else {
                    alert('ê²Œì‹œê¸€ ì‚­ì œ ì‹¤íŒ¨');
                }
            })
            .catch(error => console.error("Error:", error));
    });
    // ê²Œì‹œê¸€ ì‚­ì œ E

    // íŒ”ë¡œìš°í•˜ê¸° S
    function follow() {
        if (confirm(document.getElementById('writerNm').value + 'ë‹˜ì„ íŒ”ë¡œìš°í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            const followButton = document.getElementById('follow');
            const currentText = followButton.innerText;

            const boardId = document.getElementById('boardId').value;
            const boardNo = document.getElementById('boardNo').value;
            const memNo = document.getElementById('memNo').value;
            const data = {
                boardId: boardId,
                boardNo: boardNo,
                memNo: memNo
            };
            fetch('../../../member/follow', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json' // ìš”ì²­ í—¤ë”ì— JSON íƒ€ì… ì§€ì •
                },
                body: JSON.stringify(data) // ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ë¥¼ JSON ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ì—¬ ì „ì†¡
            })
                .then(response => response.text())
                .then(data => {
                    if (data === "success") {
                        alert('íŒ”ë¡œìš° í•˜ì˜€ìŠµë‹ˆë‹¤.');
                        if (currentText.includes('íŒ”ë¡œìš°í•˜ê¸°')) {
                            followButton.innerText = followButton.innerText.replace('íŒ”ë¡œìš°í•˜ê¸°', 'íŒ”ë¡œìš° ì¤‘');
                            followButton.id = 'cancelFollow';
                            followButton.onclick = cancelFollow;
                        }
                    } else {
                        alert('íŒ”ë¡œìš° ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤.');
                    }
                })
                .catch(error => console.error("Error:", error));
        } else {
            return false;
        }
    }
    // íŒ”ë¡œìš°í•˜ê¸° E

    // íŒ”ë¡œìš°ì·¨ì†Œí•˜ê¸° S
    function cancelFollow() {
        if (confirm(document.getElementById('writerNm').value + 'ë‹˜ íŒ”ë¡œìš°ë¥¼ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            const followButton = document.getElementById('cancelFollow');
            const currentText = followButton.innerText;

            const boardId = document.getElementById('boardId').value;
            const boardNo = document.getElementById('boardNo').value;
            const memNo = document.getElementById('memNo').value;
            const data = {
                boardId: boardId,
                boardNo: boardNo,
                memNo: memNo
            };
            fetch('../../../member/cancelFollow', {
                method: 'DELETE',
                headers: {
                    'Content-Type': 'application/json' // ìš”ì²­ í—¤ë”ì— JSON íƒ€ì… ì§€ì •
                },
                body: JSON.stringify(data) // ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ë¥¼ JSON ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ì—¬ ì „ì†¡
            })
                .then(response => response.text())
                .then(data => {
                    if (data === "success") {
                        alert('íŒ”ë¡œìš° ì·¨ì†Œ í•˜ì˜€ìŠµë‹ˆë‹¤.');
                        if (currentText.includes('íŒ”ë¡œìš° ì¤‘')) {
                            followButton.innerText = followButton.innerText.replace('íŒ”ë¡œìš° ì¤‘', 'íŒ”ë¡œìš°í•˜ê¸°');
                            followButton.id = 'follow';
                            followButton.onclick = follow;
                        }
                    } else {
                        alert('íŒ”ë¡œìš° ì·¨ì†Œì— ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤.');
                    }
                })
                .catch(error => console.error("Error:", error));
        } else {
            return false;
        }
    }
    // íŒ”ë¡œìš°ì·¨ì†Œí•˜ê¸° E

    // ì¹œêµ¬ ì‹ ì²­í•˜ê¸° S
    function createRequest() {
        if (confirm(document.getElementById('writerNm').value + 'ë‹˜ì—ê²Œ ì¹œêµ¬ ìš”ì²­ì„ ë³´ë‚´ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            const createRequestButton = document.getElementById('createRequest');
            const currentText = createRequestButton.innerText;

            const fromMemNo = document.getElementById('memNo').value;
            const data = {
                fromMemNo: fromMemNo
            };
            fetch('../../../friend/createRequest', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json' // ìš”ì²­ í—¤ë”ì— JSON íƒ€ì… ì§€ì •
                },
                body: JSON.stringify(data) // ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ë¥¼ JSON ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ì—¬ ì „ì†¡
            })
                .then(response => response.text())
                .then(data => {
                    if (data === "success") {
                        alert('ì¹œêµ¬ ìš”ì²­ì„ ì „ì†¡í–ˆìŠµë‹ˆë‹¤.');
                        if (currentText.includes('ì¹œêµ¬ì‹ ì²­')) {
                            createRequestButton.innerText = createRequestButton.innerText.replace('ì¹œêµ¬ì‹ ì²­', 'ì¹œêµ¬ìš”ì²­ì·¨ì†Œ');
                            createRequestButton.id = 'cancelFollow';
                            createRequestButton.onclick = cancelFollow;
                        }
                    } else {
                        alert('ì¹œêµ¬ ìš”ì²­ì— ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤.');
                    }
                })
                .catch(error => console.error("Error:", error));
        } else {
            return false;
        }
    }
    // ì¹œêµ¬ ì‹ ì²­í•˜ê¸° E
</script>

</body>
</html>
